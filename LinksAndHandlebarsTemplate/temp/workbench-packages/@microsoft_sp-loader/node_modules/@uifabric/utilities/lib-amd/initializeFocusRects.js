define(["require", "exports", "./dom"], function (require, exports, dom_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.IsFocusVisibleClassName = 'ms-Fabric--isFocusVisible';
    var DirectionalKeyCodes = [
        38 /* up */,
        40 /* down */,
        37 /* left */,
        39 /* right */,
        36 /* home */,
        35 /* end */,
        9 /* tab */,
        33 /* pageUp */,
        34 /* pageDown */
    ];
    /**
     * Initializes the logic which:
     *
     * 1. Subscribes keydown and mousedown events. (It will only do it once per window,
     *    so it's safe to call this method multiple times.)
     * 2. When the user presses directional keyboard keys, adds the 'is-focusVisible' classname
     *    to the document body.
     * 3. When the user clicks a mouse button, we remove the classname if it exists.
     *
     * This logic allows components on the page to conditionally render focus treatments only
     * if the global classname exists, which simplifies logic overall.
     *
     * @param window
     */
    function initializeFocusRects(window) {
        var win = (window || dom_1.getWindow());
        if (win && !win.__hasInitializeFocusRects__) {
            win.__hasInitializeFocusRects__ = true;
            win.addEventListener('mousedown', _onMouseDown, true);
            win.addEventListener('keydown', _onKeyDown, true);
        }
    }
    exports.initializeFocusRects = initializeFocusRects;
    function _onMouseDown(ev) {
        var win = dom_1.getWindow(ev.target);
        if (win) {
            var classList = win.document.body.classList;
            if (classList.contains(exports.IsFocusVisibleClassName)) {
                classList.remove(exports.IsFocusVisibleClassName);
            }
        }
    }
    function _onKeyDown(ev) {
        var win = dom_1.getWindow(ev.target);
        if (win) {
            var classList = win.document.body.classList;
            var isDirectionalKeyCode = DirectionalKeyCodes.indexOf(ev.which) > -1;
            if (isDirectionalKeyCode && !classList.contains(exports.IsFocusVisibleClassName)) {
                classList.add(exports.IsFocusVisibleClassName);
            }
        }
    }
});
//# sourceMappingURL=initializeFocusRects.js.map