{"version":3,"sources":["tasks/JestTask.ts"],"names":[],"mappings":"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","file":"JestTask.js","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\r\n// See LICENSE in the project root for license information.\r\nimport * as path from 'path';\r\nimport * as fsx from 'fs-extra';\r\nimport { GulpTask} from './GulpTask';\r\nimport { IBuildConfig } from '../IBuildConfig';\r\nimport * as Gulp from 'gulp';\r\nimport * as Jest from 'jest-cli';\r\nimport * as globby from 'globby';\r\n\r\n/**\r\n * Configuration for JestTask\r\n * @alpha\r\n */\r\nexport interface IJestConfig {\r\n  /**\r\n   * Indicate whether this task is enabled. The default value is false.\r\n   */\r\n  isEnabled?: boolean;\r\n\r\n  /**\r\n   * Indicate whether Jest cache is enabled or not.\r\n   */\r\n  cache?: boolean;\r\n\r\n  /**\r\n   * The directory where Jest should store its cached information.\r\n   */\r\n  cacheDirectory?: string;\r\n\r\n  /**\r\n   * Same as Jest CLI option collectCoverageFrom\r\n   */\r\n  collectCoverageFrom?: string[];\r\n\r\n  /**\r\n   * Same as Jest CLI option coverage\r\n   */\r\n  coverage?: boolean;\r\n\r\n  /**\r\n   * Same as Jest CLI option coverageReporters\r\n   */\r\n  coverageReporters?: string[];\r\n\r\n  /**\r\n   * Same as Jest CLI option testPathIgnorePatterns\r\n   */\r\n  testPathIgnorePatterns?: string[];\r\n\r\n  /**\r\n   * Same as Jest CLI option moduleDirectories\r\n   */\r\n  moduleDirectories?: string[];\r\n\r\n  /**\r\n   * Same as Jest CLI option maxWorkers\r\n   */\r\n  maxWorkers?: number;\r\n\r\n  /**\r\n   * Same as Jest CLI option testMatch\r\n   */\r\n  testMatch?: string[];\r\n}\r\n\r\nconst DEFAULT_JEST_CONFIG_FILE_NAME: string = 'jest.config.json';\r\n\r\n/**\r\n * We need to replace the resolver function which jest is using until the PR which\r\n * fixes jest-resolves handling of symlinks is merged:\r\n * https://github.com/facebook/jest/pull/5085\r\n */\r\n// tslint:disable-next-line:no-any\r\nconst nodeModulesPaths: any = require('jest-resolve/build/node_modules_paths');\r\nnodeModulesPaths.default = (\r\n  basedir: string,\r\n  options: {\r\n    moduleDirectory?: string[],\r\n    paths?: string[]\r\n  }\r\n): string[] => {\r\n\r\n  const nodeModulesFolders: string = 'node_modules';\r\n  const absoluteBaseDir: string = path.resolve(basedir);\r\n  const realAbsoluteBaseDir: string = fsx.realpathSync(absoluteBaseDir);\r\n  const possiblePaths: string[] = [realAbsoluteBaseDir];\r\n\r\n  let moduleFolders: string[] = [nodeModulesFolders];\r\n  if (options && options.moduleDirectory) {\r\n    moduleFolders = ([] as string[]).concat(options.moduleDirectory);\r\n  }\r\n\r\n  const windowsBaseRegex: RegExp = /^([A-Za-z]:)/;\r\n  const fileshareBaseRegex: RegExp = /^\\\\\\\\/;\r\n  let prefix: string = '/';\r\n  if (windowsBaseRegex.test(absoluteBaseDir)) {\r\n    prefix = '';\r\n  } else if (fileshareBaseRegex.test(absoluteBaseDir)) {\r\n    prefix = '\\\\\\\\';\r\n  }\r\n\r\n  let parsedPath: path.ParsedPath = path.parse(realAbsoluteBaseDir);\r\n  while (parsedPath.dir !== possiblePaths[possiblePaths.length - 1]) {\r\n    const realParsedDir: string = fsx.realpathSync(parsedPath.dir);\r\n    possiblePaths.push(realParsedDir);\r\n    parsedPath = path.parse(realParsedDir);\r\n  }\r\n\r\n  const dirs: string[] = possiblePaths.reduce((possibleDirs: string[], aPath: string) => {\r\n    return possibleDirs.concat(\r\n      moduleFolders.map((moduleDir: string) => {\r\n        return path.join(prefix, aPath, moduleDir);\r\n      })\r\n    );\r\n  }, []);\r\n\r\n  if (options.paths) {\r\n    return options.paths.concat(dirs);\r\n  }\r\n  return dirs;\r\n};\r\n\r\n/**\r\n * Indicates if jest is enabled\r\n * @internal\r\n * @param rootFolder - package root folder\r\n */\r\nexport function _isJestEnabled(rootFolder: string): boolean {\r\n  const taskConfigFile: string = path.join(rootFolder, 'config', 'jest.json');\r\n  if (!fsx.existsSync(taskConfigFile)) {\r\n    return false;\r\n  }\r\n  const taskConfig: {} = require(taskConfigFile);\r\n  // tslint:disable-next-line:no-string-literal\r\n  return !!taskConfig['isEnabled'];\r\n}\r\n\r\n/**\r\n * This task takes in a map of dest: [sources], and copies items from one place to another.\r\n * @alpha\r\n */\r\nexport class JestTask extends GulpTask<IJestConfig> {\r\n\r\n  constructor() {\r\n    super('jest',\r\n    {\r\n      cache: true,\r\n      collectCoverageFrom: ['lib/**/*.js?(x)', '!lib/**/test/**'],\r\n      coverage: true,\r\n      coverageReporters: ['json', 'html'],\r\n      testPathIgnorePatterns: ['<rootDir>/(src|lib-amd|lib-es6|coverage|build|docs|node_modules)/']\r\n    });\r\n  }\r\n\r\n  public isEnabled(buildConfig: IBuildConfig): boolean {\r\n    return super.isEnabled(buildConfig) && !!this.taskConfig.isEnabled;\r\n  }\r\n\r\n  /**\r\n   * Loads the z-schema object for this task\r\n   */\r\n  public loadSchema(): Object {\r\n    return require('./jest.schema.json');\r\n  }\r\n\r\n  public executeTask(\r\n    gulp: typeof Gulp,\r\n    completeCallback: (error?: string | Error) => void\r\n  ): void {\r\n    const configFileFullPath: string = path.join(this.buildConfig.rootPath,\r\n      'config', 'jest', DEFAULT_JEST_CONFIG_FILE_NAME);\r\n\r\n    this._copySnapshots(this.buildConfig.srcFolder, this.buildConfig.libFolder);\r\n\r\n    // tslint:disable-next-line:no-any\r\n    const jestConfig: any = {\r\n      ci: this.buildConfig.production,\r\n      cache: !!this.taskConfig.cache,\r\n      config: fsx.existsSync(configFileFullPath) ? configFileFullPath : undefined,\r\n      collectCoverageFrom: this.taskConfig.collectCoverageFrom,\r\n      coverage: this.taskConfig.coverage,\r\n      coverageReporters: this.taskConfig.coverageReporters,\r\n      coverageDirectory: path.join(this.buildConfig.tempFolder, 'coverage'),\r\n      maxWorkers: !!this.taskConfig.maxWorkers ?\r\n        this.taskConfig.maxWorkers : 1,\r\n      moduleDirectories: !!this.taskConfig.moduleDirectories ?\r\n        this.taskConfig.moduleDirectories :\r\n        ['node_modules', this.buildConfig.libFolder],\r\n      reporters: [path.join(__dirname, 'JestReporter.js')],\r\n      rootDir: this.buildConfig.rootPath,\r\n      testMatch: !!this.taskConfig.testMatch ?\r\n        this.taskConfig.testMatch : ['**/*.test.js?(x)'],\r\n      testPathIgnorePatterns: this.taskConfig.testPathIgnorePatterns,\r\n      updateSnapshot: !this.buildConfig.production\r\n    };\r\n\r\n    if (this.taskConfig.cacheDirectory) {\r\n      // tslint:disable-next-line:no-string-literal\r\n      jestConfig['cacheDirectory'] = this.taskConfig.cacheDirectory;\r\n    }\r\n\r\n    // suppress 'Running coverage on untested files...' warning\r\n    const oldTTY: true | undefined = process.stdout.isTTY;\r\n    process.stdout.isTTY = undefined;\r\n\r\n    Jest.runCLI(jestConfig,\r\n      [this.buildConfig.rootPath]).then(\r\n      (result: { results: Jest.AggregatedResult, globalConfig: Jest.GlobalConfig }) => {\r\n        process.stdout.isTTY = oldTTY;\r\n        if (result.results.numFailedTests || result.results.numFailedTestSuites) {\r\n          completeCallback(new Error('Jest tests failed'));\r\n        } else {\r\n          if (!this.buildConfig.production) {\r\n            this._copySnapshots(this.buildConfig.libFolder, this.buildConfig.srcFolder);\r\n          }\r\n          completeCallback();\r\n        }\r\n      },\r\n      (err) => {\r\n        process.stdout.isTTY = oldTTY;\r\n        completeCallback(err);\r\n      });\r\n  }\r\n\r\n  private _copySnapshots(srcRoot: string, destRoot: string): void {\r\n    const pattern: string = path.join(srcRoot, '**/__snapshots__/*.snap');\r\n    globby.sync(pattern).forEach(snapFile => {\r\n      const destination: string = snapFile.replace(srcRoot, destRoot);\r\n      if (this._copyIfMatchExtension(snapFile, destination, '.test.tsx.snap')) {\r\n        this.logVerbose(`Snapshot file ${snapFile} is copied to match extension \".test.tsx.snap\".`);\r\n      } else if (this._copyIfMatchExtension(snapFile, destination, '.test.ts.snap')) {\r\n        this.logVerbose(`Snapshot file ${snapFile} is copied to match extension \".test.ts.snap\".`);\r\n      } else if (this._copyIfMatchExtension(snapFile, destination, '.test.jsx.snap')) {\r\n        this.logVerbose(`Snapshot file ${snapFile} is copied to match extension \".test.jsx.snap\".`);\r\n      } else if (this._copyIfMatchExtension(snapFile, destination, '.test.js.snap')) {\r\n        this.logVerbose(`Snapshot file ${snapFile} is copied to match extension \".test.js.snap\".`);\r\n      } else {\r\n        this.logWarning(`Snapshot file ${snapFile} is not copied because don't find that matching test file.`);\r\n      }\r\n    });\r\n  }\r\n\r\n  private _copyIfMatchExtension(snapSourceFile: string, destinationFile: string, extension: string): boolean {\r\n    const snapDestFile: string = destinationFile.replace(/\\.test\\..+\\.snap$/, extension);\r\n    const testFileName: string = path.basename(snapDestFile, '.snap');\r\n    const testFile: string = path.resolve(path.dirname(snapDestFile), '..', testFileName); // Up from `__snapshots__`.\r\n    if (fsx.existsSync(testFile)) {\r\n      fsx.copySync(snapSourceFile, snapDestFile);\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n}"],"sourceRoot":"../../../src"}